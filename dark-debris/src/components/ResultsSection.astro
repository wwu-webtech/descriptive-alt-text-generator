---
import RefineResults from "./RefineResults.astro";
import Clipboard from "./Clipboard.astro";
import CharacterCount from "./CharacterCount.astro";

// Initial fileName value
let fileName = 'None';
---

<div id="results-container" style="display: none;">
  <h2 id="results-section">Results</h2>
  <p>Selected file: <span id="file-name">{fileName}</span></p>

  <label for="gemini-area"><h3>Gemini</h3></label>
  <div class="resultsWithClipboard">
    <textarea
      id="gemini-area"
      placeholder="Results from Gemini"
      wrap="hard"
      rows="8">
    </textarea>
    <div class="bottom-right">
      <CharacterCount charCount_id="gemini-char-count"/>
      <Clipboard copy_button_id="copy-gemini-button"/>
    </div>
  </div>
  
  <!-- Unique modal for Gemini -->
  <RefineResults 
    dialog_id="refine-results-gemini"
    detail_id="refine-gemini-detail" 
    model_id="refine-gemini" 
    button_id="refine-gemini-button"
    modal_id="refine-gemini-modal" 
  />

  <label for="chatgpt-area"><h3>ChatGPT</h3></label>
  <div class="resultsWithClipboard">
    <textarea
      id="chatgpt-area"
      placeholder="Results from ChatGPT"
      wrap="hard"
      rows="8">
    </textarea>
    <div class="bottom-right">
      <CharacterCount charCount_id="chatgpt-char-count"/>
      <Clipboard copy_button_id="copy-chatgpt-button"/>
    </div>
  </div>

  <!-- Unique modal for ChatGPT -->
  <RefineResults 
    dialog_id="refine-results-gpt"
    detail_id="refine-chatgpt-detail" 
    model_id="refine-chatgpt" 
    button_id="refine-chatgpt-button"
    modal_id="refine-chatgpt-modal"  
  />
</div>

<script type="module">
  document.addEventListener('fileSelected', (event) => {
    const fileName = event.detail;
    const fileNameElement = document.querySelector('#file-name');
    fileNameElement.textContent = fileName;
  });
</script>
